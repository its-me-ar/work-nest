<div class="p-6 max-w-2xl mx-auto space-y-6">
  <!-- Filter Tabs -->
  <div class="flex gap-3 justify-center">
    <button
      class="px-5 py-2 rounded-full text-sm font-medium transition shadow-sm"
      [class.bg-blue-600]="filter() === 'all'"
      [class.text-white]="filter() === 'all'"
      [class.bg-gray-100]="filter() !== 'all'"
      [class.text-gray-700]="filter() !== 'all'"
      (click)="setFilter('all')"
    >
      All
    </button>
    <button
      class="px-5 py-2 rounded-full text-sm font-medium transition shadow-sm"
      [class.bg-green-600]="filter() === 'completed'"
      [class.text-white]="filter() === 'completed'"
      [class.bg-gray-100]="filter() !== 'completed'"
      [class.text-gray-700]="filter() !== 'completed'"
      (click)="setFilter('completed')"
    >
      Completed
    </button>
    <button
      class="px-5 py-2 rounded-full text-sm font-medium transition shadow-sm"
      [class.bg-yellow-500]="filter() === 'pending'"
      [class.text-white]="filter() === 'pending'"
      [class.bg-gray-100]="filter() !== 'pending'"
      [class.text-gray-700]="filter() !== 'pending'"
      (click)="setFilter('pending')"
    >
      Pending
    </button>
  </div>

  <!-- Task List -->
  <div class="bg-white shadow-md rounded-xl divide-y divide-gray-100">
    <div
      *ngFor="let task of filteredTasks()"
      class="flex items-center justify-between px-4 py-3 hover:bg-gray-50 transition rounded-lg"
    >
      <div class="flex items-center gap-3">
        <input
          type="checkbox"
          [checked]="task.completed"
          (change)="toggleTask(task)"
          [disabled]="task.completed"
          class="w-5 h-5 rounded text-blue-600 focus:ring-blue-500 shadow-sm"
        />
        <span
          [class.line-through]="task.completed"
          [class.text-gray-400]="task.completed"
          class="text-gray-800 font-medium"
        >
          {{ task.title }}
        </span>
      </div>
      <div class="flex gap-3 text-sm">
        <button
          class="text-blue-600 hover:text-blue-800 font-medium"
          (click)="startEdit(task)"
          [disabled]="task.completed"
          [class.opacity-50]="task.completed"
        >
          Edit
        </button>
        <button
          class="text-red-600 hover:text-red-800 font-medium"
          (click)="confirmDelete(task)"
          [disabled]="task.completed"
          [class.opacity-50]="task.completed"
        >
          Delete
        </button>
      </div>
    </div>
    <div *ngIf="filteredTasks().length === 0" class="p-4 text-center text-gray-500">
      No tasks found
    </div>
  </div>

  <!-- Add/Edit Task -->
  <div *ngIf="filter() === 'all'" class="flex gap-2">
    <input
      type="text"
      [(ngModel)]="newTask"
      [placeholder]="editTaskId ? 'Edit task...' : 'Add new task'"
      class="flex-1 px-3 py-2 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"
    />
    <button
      class="px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-sm transition"
      (click)="addOrUpdateTask()"
    >
      {{ editTaskId ? 'Update' : 'Add' }}
    </button>
    <button
      *ngIf="editTaskId"
      class="px-5 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg shadow-sm transition"
      (click)="cancelEdit()"
    >
      Cancel
    </button>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="deleteTaskId !== null" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-xl shadow-xl w-80 animate-fadeIn">
      <h2 class="text-lg font-bold text-red-600">Delete Task?</h2>
      <p class="text-gray-600 mt-2">Are you sure you want to delete this task?</p>
      <div class="mt-5 flex justify-end gap-3">
        <button
          class="px-4 py-2 rounded-lg hover:bg-gray-100"
          (click)="cancelDelete()"
        >
          Cancel
        </button>
        <button
          class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-sm"
          (click)="deleteTaskConfirmed()"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
